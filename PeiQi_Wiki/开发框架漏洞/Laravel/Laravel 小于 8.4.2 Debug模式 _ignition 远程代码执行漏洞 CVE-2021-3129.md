# Laravel <= 8.4.2 Debug模式 _ignition 远程代码执行漏洞 CVE-2021-3129

## 漏洞描述

Laravel 是一个免费的开源 PHP Web 框架，旨在实现的Web软件的MVC架构。2021年1月13日，阿里云应急响应中心监控到国外某安全研究团队披露了 Laravel <= 8.4.2 存在远程代码执行漏洞。当Laravel开启了Debug模式时，由于Laravel自带的Ignition功能的某些接口存在过滤不严，攻击者可以发起恶意请求，通过构造恶意Log文件等方式触发Phar反序列化，从而造成远程代码执行，控制服务器。漏洞细节已在互联网公开。阿里云应急响应中心提醒 Laravel 用户尽快采取安全措施阻止漏洞攻击。

## 漏洞影响

> [!NOTE]
>
> Laravel 框架 < 8.4.3
>
> facade ignition 组件 < 2.5.2

## 环境搭建

```shell
git clone https://github.com/laravel/laravel.git
cd laravel
git checkout e849812
composer install
composer require facade/ignition==2.5.1
cp .env.example .env
php artisan serve
```

将 **laravel/config/app.php** 中的 **debug** 设置为 **true**

![](image/laravel-1.png)

访问 http://local:8000 点击生成密钥出现如下图即成功创建密钥

![](image/laravel-2.png)

刷新后正常访问

![](image/laravel-3.png)

## 漏洞复现

